---
// landing/src/layouts/DocsLayout.astro
// Docs layout — sticky sidebar navigation + main content area
// Related: Layout.astro, docs pages
import Layout from './Layout.astro';

interface Props {
  title: string;
  currentPath?: string;
}

const { title, currentPath = '' } = Astro.props;

const nav = [
  {
    group: 'Pradžia',
    items: [
      { label: 'Apžvalga', href: '/docs' },
      { label: 'Greita pradžia', href: '/docs/getting-started' },
    ],
  },
  {
    group: 'Kreditai ir planai',
    items: [
      { label: 'Kaip veikia kreditai', href: '/docs/credits' },
      { label: 'Planų palyginimas', href: '/pricing' },
    ],
  },
  {
    group: 'Analizė',
    items: [
      { label: 'Palaikomi formatai', href: '/docs/formats' },
      { label: 'ZIP archyvai', href: '/docs/zip' },
      { label: 'QA kokybės balas', href: '/docs/qa-score' },
    ],
  },
  {
    group: 'Eksportas ir integracija',
    items: [
      { label: 'PDF/DOCX eksportas', href: '/docs/export' },
      { label: 'API prieiga (Team+)', href: '/docs/api' },
    ],
  },
];
---
<Layout title={`${title} — foxDoc dokumentacija`}>
  <div style="max-width: 72rem; margin: 0 auto; padding: 2rem 1.5rem 4rem; display: flex; gap: 3rem; align-items: flex-start;">

    <!-- Sidebar -->
    <aside style="width: 220px; flex-shrink: 0; position: sticky; top: 5rem; display: none;"
           class="docs-sidebar">
      {nav.map(section => (
        <div style="margin-bottom: 1.75rem;">
          <p style="font-size: 0.7rem; font-family: 'JetBrains Mono', monospace; color: #7c3aed; text-transform: uppercase; letter-spacing: 0.08em; margin: 0 0 0.5rem;">{section.group}</p>
          <ul style="list-style: none; padding: 0; margin: 0; display: flex; flex-direction: column; gap: 0.1rem;">
            {section.items.map(item => (
              <li>
                <a href={item.href}
                   style={`display: block; padding: 0.4rem 0.75rem; border-radius: 0.375rem; font-size: 0.875rem; text-decoration: none; transition: all 0.15s; ${item.href === currentPath ? 'background: rgba(0,202,136,0.1); color: #00ca88;' : 'color: #a0aec0;'}`}
                   class="docs-link">
                  {item.label}
                </a>
              </li>
            ))}
          </ul>
        </div>
      ))}
    </aside>

    <!-- Main content -->
    <main style="flex: 1; min-width: 0;" class="docs-content">
      <!-- Mobile nav toggle -->
      <details style="margin-bottom: 2rem; display: block;" class="docs-mobile-nav">
        <summary style="cursor: pointer; padding: 0.75rem 1rem; border-radius: 0.5rem; border: 1px solid rgba(255,255,255,0.08); background: #141720; color: #a0aec0; font-size: 0.875rem; list-style: none; display: flex; align-items: center; justify-content: space-between;">
          <span>Dokumentacijos meniu</span>
          <span>▾</span>
        </summary>
        <div style="margin-top: 0.5rem; padding: 1rem; border-radius: 0.5rem; border: 1px solid rgba(255,255,255,0.08); background: #141720;">
          {nav.map(section => (
            <div style="margin-bottom: 1rem;">
              <p style="font-size: 0.7rem; font-family: 'JetBrains Mono', monospace; color: #7c3aed; text-transform: uppercase; letter-spacing: 0.08em; margin: 0 0 0.4rem;">{section.group}</p>
              {section.items.map(item => (
                <a href={item.href} style="display: block; padding: 0.35rem 0.5rem; font-size: 0.875rem; color: #a0aec0; text-decoration: none;">{item.label}</a>
              ))}
            </div>
          ))}
        </div>
      </details>

      <slot />
    </main>
  </div>

  <style>
    @media (min-width: 768px) {
      .docs-sidebar { display: block !important; }
      .docs-mobile-nav { display: none !important; }
    }
    .docs-link:hover { color: #fff !important; background: #1a1f2e !important; }
    .docs-content h1 { font-family: 'Space Grotesk', sans-serif; font-weight: 700; font-size: clamp(1.75rem, 3vw, 2.5rem); color: #fff; margin: 0 0 1rem; }
    .docs-content h2 { font-family: 'Space Grotesk', sans-serif; font-weight: 600; font-size: 1.375rem; color: #fff; margin: 2.5rem 0 0.75rem; }
    .docs-content h3 { font-family: 'Space Grotesk', sans-serif; font-weight: 600; font-size: 1.1rem; color: #e2e8f0; margin: 1.5rem 0 0.5rem; }
    .docs-content p { color: #a0aec0; line-height: 1.8; margin: 0 0 1rem; }
    .docs-content ul, .docs-content ol { color: #a0aec0; padding-left: 1.5rem; margin: 0 0 1rem; }
    .docs-content li { line-height: 1.8; }
    .docs-content code { font-family: 'JetBrains Mono', monospace; font-size: 0.85em; background: rgba(255,255,255,0.06); padding: 0.15em 0.4em; border-radius: 0.25rem; color: #00ca88; }
    .docs-content pre { background: #141720; border: 1px solid rgba(255,255,255,0.08); border-radius: 0.75rem; padding: 1.25rem; overflow-x: auto; margin: 0 0 1.5rem; }
    .docs-content pre code { background: none; padding: 0; color: #e2e8f0; }
    .docs-content a { color: #00ca88; }
    .docs-content a:hover { text-decoration: underline; }
    .docs-content table { width: 100%; border-collapse: collapse; margin: 0 0 1.5rem; font-size: 0.875rem; }
    .docs-content th { text-align: left; padding: 0.6rem 0.875rem; border-bottom: 1px solid rgba(255,255,255,0.12); color: #fff; font-weight: 600; }
    .docs-content td { padding: 0.6rem 0.875rem; border-bottom: 1px solid rgba(255,255,255,0.06); color: #a0aec0; }
    .docs-content .callout { padding: 1rem 1.25rem; border-radius: 0.75rem; border-left: 3px solid #00ca88; background: rgba(0,202,136,0.06); margin: 0 0 1.5rem; }
    .docs-content .callout p { margin: 0; }
  </style>
</Layout>
