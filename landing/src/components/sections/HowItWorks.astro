---
// landing/src/components/sections/HowItWorks.astro
// 3-step process — numbered list, light warm cream section
// Related: index.astro
const steps = [
  {
    num: '01',
    title: 'Įkelkite dokumentus',
    desc: 'Įkelkite PDF, DOCX, XLSX failus arba ZIP archyvą su visu pirkimo paketu. Palaikome iki 50+ dokumentų vienu metu.',
  },
  {
    num: '02',
    title: 'AI analizuoja',
    desc: 'Dirbtinis intelektas automatiškai ištraukia CPV kodus, vertes, terminus, techninius reikalavimus ir kitus esminius duomenis.',
  },
  {
    num: '03',
    title: 'Gaukite ataskaitą',
    desc: 'Per 3 minutes gaunate struktūrizuotą ataskaitą su QA balu. Eksportuokite į PDF/DOCX arba klauskite papildomų klausimų.',
  },
];
---
<section id="how-it-works" class="py-16 sm:py-24 px-4 sm:px-6" style="background: #fdf7f2;">
  <div class="max-w-6xl mx-auto">
    <div class="text-center mb-12 sm:mb-16">
      <p class="text-xs sm:text-sm font-mono mb-3" style="color: #d97706;">// kaip veikia</p>
      <h2 class="font-heading font-bold" style="color: #1a1512;">3 žingsniai iki išsamios ataskaitos</h2>
    </div>

    <div class="how-steps flex flex-col md:flex-row">
      {steps.map((step, i) => (
        <div class="scroll-reveal step-item flex-1 flex flex-col py-8 md:py-0 md:px-10"
             style={`transition-delay: ${i * 100}ms;`}>
          <div class="font-mono font-bold mb-5" style="font-size: 3rem; line-height: 1; color: rgba(234, 88, 12, 0.18);">{step.num}</div>
          <div class="w-8 mb-5" style="height: 2px; background: #ea580c;"></div>
          <h3 class="font-heading font-semibold mb-3" style="font-size: 1.125rem; color: #1a1512;">{step.title}</h3>
          <p class="text-sm leading-relaxed" style="color: #4a3f38;">{step.desc}</p>
        </div>
      ))}
    </div>
  </div>
</section>

<style>
  /* Mobile: top border between steps */
  .how-steps .step-item + .step-item {
    border-top: 1px solid rgba(0,0,0,0.1);
  }
  /* Desktop: left border dividers, no top border */
  @media (min-width: 768px) {
    .how-steps .step-item + .step-item {
      border-top: none;
      border-left: 1px solid rgba(0,0,0,0.1);
    }
    .how-steps .step-item:first-child { padding-left: 0 !important; }
    .how-steps .step-item:last-child  { padding-right: 0 !important; }
  }
  .scroll-reveal { opacity: 0; transform: translateY(16px); transition: opacity 0.5s ease, transform 0.5s ease; }
  .scroll-reveal.visible { opacity: 1; transform: none; }
</style>

<script>
  const observer = new IntersectionObserver(
    (entries) => entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); }),
    { threshold: 0.1, rootMargin: '0px 0px -40px 0px' }
  );
  document.querySelectorAll('.scroll-reveal').forEach(el => observer.observe(el));
</script>
