---
// src/components/sections/FAQ.astro
// Accordion FAQ with smooth height animation
const faqs = [
  { q: 'Kaip veikia kreditų sistema?', a: 'Kiekviena analizė sunaudoja 1–5 kreditus priklausomai nuo dokumentų kiekio: 1–15 dokumentų = 1 kreditas, 16–50 dokumentų = 3 kreditai, 50+ dokumentų = 5 kreditai. Sistema praneša kreditų kainą prieš pradedant analizę.' },
  { q: 'Kokius dokumentų formatus palaiko foxDoc?', a: 'Palaikome PDF, DOCX, XLSX failus ir ZIP archyvus. ZIP archyvai automatiškai išsklepiami ir visi viduje esantys dokumentai analizuojami kartu.' },
  { q: 'Ar saugūs mano dokumentai?', a: 'Dokumentai perduodami per šifruotą HTTPS ryšį. Po analizės failai automatiškai ištrinami iš serverio. Niekada nesidalijame Jūsų dokumentais su trečiosiomis šalimis.' },
  { q: 'Ar galiu naudoti nemokamai?', a: 'Taip! Nemokamas planas suteikia 3 kreditus vienkartinai — pakanka pilnai ataskaitai gauti. Nereikia kredito kortelės.' },
  { q: 'Kiek laiko užtrunka analizė?', a: 'Standartinis 10–15 dokumentų paketas analizuojamas per ~3 minutes. Didesni paketai (iki 50 dokumentų) gali trukti 5–8 minutes.' },
  { q: 'Ar veikia su ZIP archyvais?', a: 'Taip, tai viena pagrindinių foxDoc funkcijų. Galite įkelti visą pirkimo dokumentų paketą kaip ZIP — sistema automatiškai išsklepia ir analizuoja visus dokumentus.' },
  { q: 'Ar galiu eksportuoti ataskaitą?', a: 'Starter ir aukštesni planai leidžia eksportuoti ataskaitą PDF formatu. Pro ir aukštesni planai papildomai palaiko DOCX eksportą.' },
];
---
<section class="py-16 sm:py-24 px-4 sm:px-6" style="background: #1e1a16;">
  <div class="max-w-3xl mx-auto">
    <div class="text-center mb-12 sm:mb-16">
      <p class="text-xs sm:text-sm font-mono mb-3" style="color: #f59e0b;">// dažni klausimai</p>
      <h2 class="font-heading font-bold text-white">Dažni klausimai</h2>
    </div>

    <div class="flex flex-col gap-2">
      {faqs.map((faq, i) => (
        <div class="faq-item rounded-xl overflow-hidden border" style="border-color: rgba(168,162,158,0.15); background: #231c18;">
          <button class="faq-btn w-full flex items-center justify-between gap-4 px-5 py-4 text-left transition-colors duration-200"
                  style="min-height: 56px; color: #fdf9f7; background: transparent; border: none; cursor: pointer;"
                  onmouseover="this.style.background='#2e2520'"
                  onmouseout="this.style.background='transparent'"
                  aria-expanded="false">
            <span class="font-medium text-sm sm:text-base">{faq.q}</span>
            <span class="faq-icon shrink-0 text-xl transition-transform duration-300" style="color: #f59e0b;">+</span>
          </button>
          <div class="faq-body" style="max-height: 0; overflow: hidden; transition: max-height 0.3s ease;">
            <p class="px-5 pb-4 text-sm sm:text-base leading-relaxed" style="color: #b5a99f;">{faq.a}</p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>

<script>
  document.querySelectorAll<HTMLButtonElement>('.faq-btn').forEach(btn => {
    btn.addEventListener('click', () => {
      const item = btn.closest<HTMLElement>('.faq-item')!;
      const body = item.querySelector<HTMLElement>('.faq-body')!;
      const icon = btn.querySelector<HTMLElement>('.faq-icon')!;
      const isOpen = body.style.maxHeight !== '' && body.style.maxHeight !== '0px';

      // Close all
      document.querySelectorAll<HTMLElement>('.faq-body').forEach(b => { b.style.maxHeight = '0px'; });
      document.querySelectorAll<HTMLElement>('.faq-icon').forEach(ic => { ic.textContent = '+'; ic.style.transform = ''; });
      document.querySelectorAll<HTMLButtonElement>('.faq-btn').forEach(b => b.setAttribute('aria-expanded', 'false'));

      // Open clicked if was closed
      if (!isOpen) {
        body.style.maxHeight = body.scrollHeight + 'px';
        icon.textContent = '−';
        icon.style.transform = 'rotate(180deg)';
        btn.setAttribute('aria-expanded', 'true');
      }
    });
  });
</script>
