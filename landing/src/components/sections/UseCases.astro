---
// landing/src/components/sections/UseCases.astro
// Audience segments — asymmetric bento with hover slide-in stats and richer interactivity
// Related: index.astro, pages/use-cases.astro
const cases = [
  {
    tag: 'Perkančios organizacijos',
    title: 'Greitai įvertinkite gautus pasiūlymus',
    desc: 'Automatiškai palyginkite tiekėjų pasiūlymus pagal techninius reikalavimus, kainas ir terminus. Sumažinkite peržiūros laiką nuo dienų iki valandų.',
    chips: ['Pasiūlymų vertinimas', 'Atitikties tikrinimas', 'Ataskaitos'],
    href: '/use-cases#perkanciosios',
    metric: '−85%',
    metricLabel: 'peržiūros laikas',
    large: true,
    icon: `<path d="M3 21h18M5 21V7l7-4 7 4v14M9 21v-6h6v6"/>`,
  },
  {
    tag: 'Tiekėjai ir rangovai',
    title: 'Supraskite pirkimo sąlygas akimirksniu',
    desc: 'Prieš teikdami pasiūlymą, per 3 minutes sužinokite visus techninius reikalavimus, terminus ir rizikos faktorius.',
    chips: ['Pirkimo analizė', 'CPV kodai', 'Rizika'],
    href: '/use-cases#tiekejai',
    metric: '3 min',
    metricLabel: 'pilna analizė',
    large: false,
    icon: `<path d="M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z"/><polyline points="3.27 6.96 12 12.01 20.73 6.96"/><line x1="12" y1="22.08" x2="12" y2="12"/>`,
  },
  {
    tag: 'Auditoriai ir konsultantai',
    title: 'Tikrinkite pirkimų atitiktį reikalavimams',
    desc: 'Sistemingai analizuokite pirkimų dokumentų paketus dėl procedūrinių klaidų ir neatitikčių.',
    chips: ['Auditas', 'Atitiktis', 'Dokumentai'],
    href: '/use-cases#auditoriai',
    metric: '50+',
    metricLabel: 'dokumentų vienu metu',
    large: false,
    icon: `<circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/>`,
  },
];
---
<section class="py-16 sm:py-24 px-4 sm:px-6" style="background: #0d0a08;">
  <div class="max-w-6xl mx-auto">
    <div class="text-center mb-12 sm:mb-16">
      <p class="text-xs sm:text-sm font-mono mb-3" style="color: #f59e0b;">// naudojimo atvejai</p>
      <h2 class="font-heading font-bold" style="color: #fdf9f7;">Kas naudoja foxDoc?</h2>
    </div>

    <div class="flex flex-col md:grid gap-4" style="grid-template-columns: 1fr 0.75fr;">

      <!-- Large card -->
      <a href={cases[0].href}
         class="uc-card scroll-reveal flex flex-col p-7 rounded-2xl border relative overflow-hidden"
         style="border-color: rgba(168,162,158,0.12); background: #1a1512; text-decoration: none; min-height: 320px;">

        <!-- Ambient background glow -->
        <div class="uc-glow" style="position:absolute;top:-60px;right:-60px;width:200px;height:200px;background:radial-gradient(circle,rgba(245,158,11,0.07) 0%,transparent 70%);pointer-events:none;transition:opacity 0.4s;opacity:0;"></div>

        <!-- Icon -->
        <div class="mb-5 w-10 h-10 flex items-center justify-center rounded-lg" style="background: rgba(245,158,11,0.08);">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
            <Fragment set:html={cases[0].icon} />
          </svg>
        </div>

        <p class="text-xs font-mono mb-2" style="color: #f59e0b;">{cases[0].tag}</p>
        <h3 class="font-heading font-semibold mb-4" style="font-size: 1.25rem; color: #fdf9f7; line-height: 1.35;">{cases[0].title}</h3>
        <p class="text-sm leading-relaxed mb-5 flex-1" style="color: #b5a99f;">{cases[0].desc}</p>

        <!-- Chips -->
        <div class="flex flex-wrap gap-2 mb-5">
          {cases[0].chips.map(c => (
            <span class="px-2 py-1 text-xs rounded" style="background: rgba(168,162,158,0.07); color: #7a6b61; border: 1px solid rgba(168,162,158,0.12);">{c}</span>
          ))}
        </div>

        <!-- Metric + arrow row -->
        <div class="flex items-center justify-between">
          <div class="uc-metric" style="opacity:0;transform:translateY(6px);transition:all 0.3s;">
            <span class="font-heading font-bold" style="font-size:1.5rem;color:#f59e0b;">{cases[0].metric}</span>
            <span class="text-xs ml-2" style="color:#7a6b61;">{cases[0].metricLabel}</span>
          </div>
          <p class="uc-arrow text-sm font-medium" style="color: #f59e0b; opacity: 0; transition: opacity 0.2s; margin:0;">Sužinoti daugiau →</p>
        </div>
      </a>

      <!-- Right column: two smaller cards -->
      <div class="flex flex-col gap-4">
        {cases.slice(1).map((c, i) => (
          <a href={c.href}
             class="uc-card scroll-reveal flex flex-col p-5 rounded-2xl border flex-1 relative overflow-hidden"
             style={`border-color: rgba(168,162,158,0.12); background: #1a1512; text-decoration: none; transition-delay: ${(i+1)*80}ms;`}>

            <!-- Ambient glow -->
            <div class="uc-glow" style="position:absolute;top:-40px;right:-40px;width:140px;height:140px;background:radial-gradient(circle,rgba(245,158,11,0.07) 0%,transparent 70%);pointer-events:none;transition:opacity 0.4s;opacity:0;"></div>

            <!-- Icon -->
            <div class="mb-4 w-9 h-9 flex items-center justify-center rounded-lg" style="background: rgba(245,158,11,0.08);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#f59e0b" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                <Fragment set:html={c.icon} />
              </svg>
            </div>

            <p class="text-xs font-mono mb-1" style="color: #f59e0b;">{c.tag}</p>
            <h3 class="font-heading font-semibold mb-2" style="font-size: 1rem; color: #fdf9f7; line-height: 1.35;">{c.title}</h3>
            <p class="text-sm leading-relaxed flex-1 mb-3" style="color: #b5a99f; font-size: 0.8125rem;">{c.desc}</p>

            <!-- Metric + arrow row -->
            <div class="flex items-center justify-between">
              <div class="uc-metric" style="opacity:0;transform:translateY(5px);transition:all 0.3s;">
                <span class="font-heading font-bold" style="font-size:1.125rem;color:#f59e0b;">{c.metric}</span>
                <span class="text-xs ml-1.5" style="color:#7a6b61;">{c.metricLabel}</span>
              </div>
              <p class="uc-arrow text-xs font-medium" style="color: #f59e0b; opacity: 0; transition: opacity 0.2s; margin:0;">→</p>
            </div>
          </a>
        ))}
      </div>
    </div>
  </div>
</section>

<style>
  .uc-card {
    transition: border-color 0.25s, transform 0.25s, box-shadow 0.25s;
  }
  .uc-card:hover {
    border-color: rgba(245,158,11,0.22) !important;
    transform: translateY(-2px);
    box-shadow: 0 8px 32px rgba(0,0,0,0.35);
  }
  .uc-card:hover .uc-arrow { opacity: 1 !important; }
  .uc-card:hover .uc-metric { opacity: 1 !important; transform: translateY(0) !important; }
  .uc-card:hover .uc-glow { opacity: 1 !important; }

  .scroll-reveal { opacity: 0; transform: translateY(16px); transition: opacity 0.5s ease, transform 0.5s ease; }
  .scroll-reveal.visible { opacity: 1; transform: none; }
</style>

<script>
  const observer = new IntersectionObserver(
    (entries) => entries.forEach(e => { if (e.isIntersecting) e.target.classList.add('visible'); }),
    { threshold: 0.1, rootMargin: '0px 0px -40px 0px' }
  );
  document.querySelectorAll('.scroll-reveal').forEach(el => observer.observe(el));
</script>
