---
// src/components/MobileNav.astro
// Hamburger button + slide-in drawer for mobile navigation
---
<!-- Hamburger button (mobile only) -->
<button id="menu-btn"
        class="md:hidden w-11 h-11 flex items-center justify-center rounded-lg transition-colors duration-200"
        style="color: #fdf9f7;"
        aria-label="Atidaryti navigacijos meniu"
        aria-expanded="false"
        aria-controls="mobile-drawer">
  <svg id="icon-open" width="22" height="22" viewBox="0 0 22 22" fill="none" aria-hidden="true">
    <path d="M3 6h16M3 11h16M3 16h16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
  </svg>
  <svg id="icon-close" width="22" height="22" viewBox="0 0 22 22" fill="none" class="hidden" aria-hidden="true">
    <path d="M5 5l12 12M17 5L5 17" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
  </svg>
</button>

<!-- Overlay -->
<div id="drawer-overlay"
     class="fixed inset-0 z-40 hidden"
     style="background: rgba(0,0,0,0.65);"
     aria-hidden="true"></div>

<!-- Drawer -->
<div id="mobile-drawer"
     role="dialog"
     aria-label="Navigacijos meniu"
     class="fixed top-0 right-0 bottom-0 z-50 w-72 flex flex-col"
     style="background: #231c18; border-left: 1px solid rgba(168,162,158,0.15); display: none; transform: translateX(100%); transition: transform 0.3s ease-in-out;">

  <!-- Drawer header -->
  <div class="flex items-center justify-between p-6" style="border-bottom: 1px solid rgba(168,162,158,0.10);">
    <a href="/" class="flex items-center gap-2">
      <img src="/favicon.svg" alt="foxDoc logo" width="24" height="24" />
      <span class="font-heading font-bold text-white">fox<span style="color: #f59e0b;">Doc</span></span>
    </a>
    <button id="close-btn"
            class="w-9 h-9 flex items-center justify-center rounded-lg transition-colors duration-200"
            style="color: #b5a99f;"
            aria-label="Uždaryti meniu">
      <svg width="18" height="18" viewBox="0 0 18 18" fill="none">
        <path d="M4 4l10 10M14 4L4 14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
    </button>
  </div>

  <!-- Nav links -->
  <nav class="flex-1 overflow-y-auto p-4">
    <div class="flex flex-col gap-1">
      <a href="/features"   class="flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-colors duration-200" style="color: #b5a99f;" onmouseover="this.style.color='#fdf9f7';this.style.background='#2e2520'" onmouseout="this.style.color='#b5a99f';this.style.background='transparent'">Funkcijos</a>
      <a href="/pricing"    class="flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-colors duration-200" style="color: #b5a99f;" onmouseover="this.style.color='#fdf9f7';this.style.background='#2e2520'" onmouseout="this.style.color='#b5a99f';this.style.background='transparent'">Kainodara</a>
      <a href="/use-cases"  class="flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-colors duration-200" style="color: #b5a99f;" onmouseover="this.style.color='#fdf9f7';this.style.background='#2e2520'" onmouseout="this.style.color='#b5a99f';this.style.background='transparent'">Naudojimo atvejai</a>
      <a href="/docs"       class="flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-colors duration-200" style="color: #b5a99f;" onmouseover="this.style.color='#fdf9f7';this.style.background='#2e2520'" onmouseout="this.style.color='#b5a99f';this.style.background='transparent'">Dokumentacija</a>
      <a href="/forum"      class="flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-colors duration-200" style="color: #b5a99f;" onmouseover="this.style.color='#fdf9f7';this.style.background='#2e2520'" onmouseout="this.style.color='#b5a99f';this.style.background='transparent'">Forumas</a>
      <a href="/about"      class="flex items-center gap-3 px-4 py-3 rounded-lg text-base font-medium transition-colors duration-200" style="color: #b5a99f;" onmouseover="this.style.color='#fdf9f7';this.style.background='#2e2520'" onmouseout="this.style.color='#b5a99f';this.style.background='transparent'">Apie mus</a>
    </div>
  </nav>

  <!-- Drawer footer CTAs -->
  <div class="p-4 flex flex-col gap-3" style="border-top: 1px solid rgba(168,162,158,0.10);">
    <a href="https://app.foxdoc.io/login" class="btn-secondary w-full text-sm text-center">Prisijungti</a>
    <a href="https://app.foxdoc.io" class="btn-primary w-full text-sm text-center">Išbandyti nemokamai</a>
  </div>
</div>

<script>
  const menuBtn = document.getElementById('menu-btn');
  const closeBtn = document.getElementById('close-btn');
  const drawer = document.getElementById('mobile-drawer');
  const overlay = document.getElementById('drawer-overlay');
  const iconOpen = document.getElementById('icon-open');
  const iconClose = document.getElementById('icon-close');

  function openMenu() {
    if (drawer) drawer.style.transform = 'translateX(0)';
    overlay?.classList.remove('hidden');
    iconOpen?.classList.add('hidden');
    iconClose?.classList.remove('hidden');
    menuBtn?.setAttribute('aria-expanded', 'true');
    document.body.style.overflow = 'hidden';
  }

  function closeMenu() {
    if (drawer) drawer.style.transform = 'translateX(100%)';
    overlay?.classList.add('hidden');
    iconOpen?.classList.remove('hidden');
    iconClose?.classList.add('hidden');
    menuBtn?.setAttribute('aria-expanded', 'false');
    document.body.style.overflow = '';
  }

  menuBtn?.addEventListener('click', openMenu);
  closeBtn?.addEventListener('click', closeMenu);
  overlay?.addEventListener('click', closeMenu);

  // Close on Escape key
  document.addEventListener('keydown', (e) => {
    if (e.key === 'Escape') closeMenu();
  });
</script>
